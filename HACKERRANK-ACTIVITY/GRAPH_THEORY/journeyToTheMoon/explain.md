To solve this problem, I grouped astronauts by country using a graph. Each pair in the input means two astronauts are from the same country. I used DFS to find the size of each country group. Then, I calculated how many ways we can choose pairs of astronauts from different countries by multiplying group sizes together. This gives the total number of valid pairs for the moon mission.